# Linglong Flake

ä¸€ä¸ªç”¨äºéƒ¨ç½²ç²ç‘ï¼ˆLinglongï¼‰å®¹å™¨çš„ Nix Flake é¡¹ç›®ã€‚

## ä»€ä¹ˆæ˜¯ç²ç‘å®¹å™¨ï¼Ÿ

ç²ç‘ï¼ˆLinglongï¼‰æ˜¯ä¸€ä¸ªè·¨å‘è¡Œç‰ˆçš„åŒ…ç®¡ç†å™¨ï¼Œæ”¯æŒæ²™ç›’åŒ–åº”ç”¨å’Œå…±äº«è¿è¡Œæ—¶ã€‚å®ƒå…è®¸æ‚¨ï¼š

- åœ¨ä¸åŒ Linux å‘è¡Œç‰ˆä¸Šè¿è¡Œç›¸åŒçš„åº”ç”¨
- ä½¿ç”¨æ²™ç›’æŠ€æœ¯éš”ç¦»åº”ç”¨ç¯å¢ƒ
- å…±äº«è¿è¡Œæ—¶åº“ï¼Œå‡å°‘ç£ç›˜å ç”¨
- æ”¯æŒ OCI å®¹å™¨æ ‡å‡†

## é¡¹ç›®ç‰¹æ€§

- ğŸš€ **è·¨å¹³å°å…¼å®¹**: æ”¯æŒå¤šç§ Linux å‘è¡Œç‰ˆ
- ğŸ”’ **æ²™ç›’å®‰å…¨**: åº”ç”¨è¿è¡Œåœ¨éš”ç¦»ç¯å¢ƒä¸­
- ğŸ“¦ **åŒ…ç®¡ç†**: å®Œæ•´çš„åŒ…ç®¡ç†åŠŸèƒ½
- ğŸ› ï¸ **å¼€å‘å‹å¥½**: æ”¯æŒ Debug å’Œ Release æ„å»ºæ¨¡å¼
- ğŸ¯ **NixOS é›†æˆ**: æä¾› NixOS æ¨¡å—æ”¯æŒ

## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºåŒ…

```bash
# æ„å»ºæ‰€æœ‰åŒ…ï¼ˆé»˜è®¤ Release æ¨¡å¼ï¼‰
./build-debug.sh

# æ„å»ºç‰¹å®šåŒ…
./build-debug.sh linyaps-box
./build-debug.sh linyaps
```

### 2. æ‰‹åŠ¨æ„å»º

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®æ„å»º
nix build .#linyaps-box
nix build .#linyaps

# æ„å»º Debug ç‰ˆæœ¬
nix build .#linyaps-box-debug
nix build .#linyaps-debug
```

### 3. åœ¨ NixOS ä¸­ä½¿ç”¨

åœ¨æ‚¨çš„ `configuration.nix` æˆ– `flake.nix` ä¸­ï¼š

```nix
services.linyaps = {
  enable = true;
  debug = false; # é»˜è®¤ Release æ¨¡å¼ï¼Œè®¾ä¸º true ä½¿ç”¨ Debug ç‰ˆæœ¬
};
```

## æ„å»ºæ¨¡å¼

### Release æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
- å¯ç”¨ä¼˜åŒ–ï¼Œæ€§èƒ½æ›´å¥½
- æ–‡ä»¶å¤§å°æ›´å°
- é€‚åˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨

### Debug æ¨¡å¼
- åŒ…å«å®Œæ•´çš„è°ƒè¯•ä¿¡æ¯
- é€‚åˆå¼€å‘å’Œè°ƒè¯•ç¯å¢ƒ
- ä¿ç•™ç¬¦å·è¡¨

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ flake.nix              # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ pkgs/                  # åŒ…å®šä¹‰
â”‚   â”œâ”€â”€ default.nix        # linyaps åŒ…å®šä¹‰
â”‚   â””â”€â”€ linyaps-box.nix    # linyaps-box åŒ…å®šä¹‰
â”œâ”€â”€ build-debug.sh         # æ„å»ºè„šæœ¬
â”œâ”€â”€ example-configuration.nix  # NixOS é…ç½®ç¤ºä¾‹
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

## ä¾èµ–è¯´æ˜

- **linyaps-box**: ç®€å•çš„ OCI è¿è¡Œæ—¶ï¼Œä¸»è¦ç”¨äº linyaps
- **linyaps**: ä¸»è¦çš„åŒ…ç®¡ç†å™¨ï¼Œæä¾›å®Œæ•´çš„ç²ç‘å®¹å™¨åŠŸèƒ½

## ä½¿ç”¨åœºæ™¯

- ğŸ  **å®¶åº­ç”¨æˆ·**: åœ¨ä¸åŒå‘è¡Œç‰ˆé—´è¿ç§»åº”ç”¨
- ğŸ‘¨â€ğŸ’» **å¼€å‘è€…**: å¼€å‘å’Œæµ‹è¯•è·¨å¹³å°åº”ç”¨
- ğŸ¢ **ä¼ä¸šç¯å¢ƒ**: æ ‡å‡†åŒ–åº”ç”¨éƒ¨ç½²
- ğŸ§ª **æµ‹è¯•ç¯å¢ƒ**: åº”ç”¨å…¼å®¹æ€§æµ‹è¯•

## ç›¸å…³é“¾æ¥

- [ç²ç‘å®˜ç½‘](https://linglong.org.cn/)
- [GitHub ä»“åº“](https://github.com/OpenAtom-Linyaps/linyaps)
- [å®˜æ–¹æ–‡æ¡£](https://linglong.org.cn/docs/)

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

---

å‚è€ƒäº† [nur-packages](https://github.com/HHR2020/nur-packages) é¡¹ç›®ã€‚